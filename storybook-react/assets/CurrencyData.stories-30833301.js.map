{"version":3,"file":"CurrencyData.stories-30833301.js","sources":["../../../component-library-react/src/CurrencyData.tsx","../../../../components/currency-data/README.md?raw"],"sourcesContent":["/**\n * @license EUPL-1.2\n * Copyright (c) 2021 Robbert Broersma\n */\n\nimport clsx from 'clsx';\nimport { ForwardedRef, forwardRef, HTMLAttributes } from 'react';\n\nexport interface CurrencyDataProps extends HTMLAttributes<HTMLDataElement> {\n  currency?: string;\n  amount: string | number;\n  locale?: string;\n}\n\nexport const formatLabel = (locale: string, currency: string, amount: number): string =>\n  new Intl.NumberFormat(locale, {\n    style: 'currency',\n    currency,\n    minimumFractionDigits: Number.isInteger(amount) ? 0 : undefined,\n    useGrouping: false,\n  })\n    .format(amount)\n    // Remove whitespace\n    .replace(/[\\s]+/g, '')\n    // Replace dash (U+002D) with minus sign (U+2212)\n    .replace('-', '\\u2212');\n\nexport const formatVisually = (locale: string, currency: string, amount: number): string => {\n  let formatted = new Intl.NumberFormat(locale, {\n    style: 'currency',\n    currency,\n  }).format(amount);\n\n  // Replace dash (U+002D) with minus sign (U+2212)\n  formatted = formatted.replace(/-/, '\\u2212');\n\n  // Move the minus to before the currency\n  if ((locale === 'nl' || locale === 'nl-NL') && /\\u2212/.test(formatted)) {\n    formatted = formatted.replace(/(.+)\\u2212(.+)/, '\\u2212 $1$2');\n  }\n\n  // Replace white space with non-breaking space\n  formatted = formatted.replace(/ /g, '\\u00A0');\n\n  return formatted;\n};\n\nexport const CurrencyData = forwardRef(\n  (\n    { children, currency = 'EUR', amount, locale = 'nl-NL', className, ...restProps }: CurrencyDataProps,\n    ref: ForwardedRef<HTMLDataElement>,\n  ) => {\n    const number = typeof amount === 'string' ? parseFloat(amount) : amount;\n    const labelFormatted = formatLabel(locale, currency, number);\n    const visuallyFormatted = formatVisually(locale, currency, number);\n\n    return (\n      <data\n        {...restProps}\n        ref={ref}\n        value={`${currency} ${amount}`}\n        className={clsx(\n          'utrecht-currency-data',\n          number < 0 && 'utrecht-currency-data--negative',\n          number > 0 && 'utrecht-currency-data--positive',\n          className,\n        )}\n        aria-label={labelFormatted}\n      >\n        {children || visuallyFormatted}\n      </data>\n    );\n  },\n);\n\nCurrencyData.displayName = 'CurrencyData';\n","export default \"<!-- @license CC0-1.0 -->\\n\\n# Currency data\\n\""],"names":["formatLabel","locale","currency","amount","formatVisually","formatted","CurrencyData","forwardRef","children","className","restProps","ref","number","labelFormatted","visuallyFormatted","jsx","clsx","readme"],"mappings":"mqBAcO,MAAAA,EAAA,CAAAC,EAAAC,EAAAC,IAAA,IAAA,KAAA,aAAAF,EAAA,CACyB,MAAA,WACrB,SAAAC,EACP,sBAAA,OAAA,UAAAC,CAAA,EAAA,EAAA,OACsD,YAAA,EAExD,CAAA,EAAA,OAAAA,CAAA,EAAA,QAAA,SAAA,EAAA,EAAA,QAAA,IAAA,GAAA,EAOKC,EAAA,CAAAH,EAAAC,EAAAC,IAAA,CACL,IAAAE,EAAA,IAAA,KAAA,aAAAJ,EAAA,CAA8C,MAAA,WACrC,SAAAC,CACP,CAAA,EAAA,OAAAC,CAAA,EAIF,OAAAE,EAAAA,EAAA,QAAA,IAAA,GAAA,GAGAJ,IAAA,MAAAA,IAAA,UAAA,SAAA,KAAAI,CAAA,IACEA,EAAAA,EAAA,QAAA,iBAAA,QAAA,GAIFA,EAAAA,EAAA,QAAA,KAAA,GAAA,EAEAA,CACF,EAEOC,EAAAC,EAAA,WAAqB,CAAA,CAAA,SAAAC,EAAA,SAAAN,EAAA,MAAA,OAAAC,EAAA,OAAAF,EAAA,QAAA,UAAAQ,EAAA,GAAAC,CAAA,EAAAC,IAAA,CAKxB,MAAAC,EAAA,OAAAT,GAAA,SAAA,WAAAA,CAAA,EAAAA,EACAU,EAAAb,EAAAC,EAAAC,EAAAU,CAAA,EACAE,EAAAV,EAAAH,EAAAC,EAAAU,CAAA,EAEA,OAAAG,EACE,OAAC,CAAA,GAAAL,EACK,IAAAC,EACJ,MAAA,GAAAT,CAAA,IAAAC,CAAA,GAC4B,UAAAa,EACjB,wBACTJ,EAAA,GAAA,kCACcA,EAAA,GAAA,kCACAH,CACd,EACF,aAAAI,EACY,SAAAL,GAAAM,CAEC,CAAA,CACf,CAGN,EAEAR,EAAA,YAAA,saC3EA,MAAeW,EAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;"}